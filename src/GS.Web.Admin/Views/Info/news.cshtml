@{
    ViewData["Title"] = "Index";

}
@using Sikiro.Web.Admin.Permission
@model Sikiro.Web.Admin.Models.PageListParams<Sikiro.Web.Admin.Models.Info.InfoParams>
@section Head{
    <link rel="stylesheet" href="~/layuiadmin/style/admin.css" media="all">
}
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-form layui-card-header layuiadmin-card-header-auto">
            <div class="layui-form-item">
                <layuiInput asp-for="Params.Desc" text="消息内容" placeholder="请输入" />

                <layuitablefreshbutton id="btn-submit" targetformid="Info-table" />
            </div>
        </div>

        <div class="layui-card-body" id="Info">

            <div style="padding-bottom: 10px;">
                <LayuiButton class="layui-btn layuiadmin-btn-admin"  PermCode="@PermCode.Info_Add.GetHashCode()">添加</LayuiButton>
            </div>

            <layuiTable id="Info-table" lay-filter="Info-table" toolbar="" colsModel="typeof(InfoModel)" asp-action="newsList" asp-controller="Info" />

        </div>
    </div>
</div>

@section Scripts
    {
    <script>
        $(function () {

            var edit = function (id) {
                $.openLayer("回复", "/Info/Edit?id=" + id, function () {
                    $("#btn-submit").click();
                },480,380)
            }
            table.on('tool(Info-table)',
                function (obj) {
                    var data = obj.data;

                    if (obj.event === 'edit') {
                        edit(data.id);
                    }
                });

            $('#Info .layui-btn').on("click", function () {
                $.openLayer("新增消息", "/Info/Add", function () {
                    $("#btn-submit").click();
                }, 480, 380);
            });
        });


    </script>
}
